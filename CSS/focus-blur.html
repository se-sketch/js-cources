<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Apply JavaScript example</title>
  </head>

  <body>
		    
		<style>
		  .error {
		    background: red;
		  }

		  div.edit{
		  	background: lightgreen;
		  	min-width: 100px;
		  	height: 20px;
		  }
		</style>

		Your email please: <input type="email" id="input">
		<input type="text" style="width:220px" placeholder="make email invalid and try to focus here">

		<script>
		  input.onblur = function() {
		    if (!this.value.includes('@')) { // not email
		      // show the error
		      this.classList.add("error");
		      // ...and put the focus back
		      input.focus();
		    } else {
		      this.classList.remove("error");
		    }
		  };
		</script>

		<hr>

		<script type="text/javascript">

			let div = document.createElement('div');
			div.className = 'edit';

			let textarea = null;

			document.body.append(div);

			div.addEventListener('click', (event) => {

				textarea = document.createElement('textArea');
				textarea.textContent = div.innerText;

				div.replaceWith(textarea);
				textarea.focus();

				textarea.addEventListener('blur', () => editEnd());

				textarea.addEventListener('keypress', (event) => {
					// event.key == 'Enter'
					if (event.keyCode == 13) textarea.blur();
				});
			});

			function editEnd(){
				div.innerText = textarea.value;
				textarea.replaceWith(div);
			}


		</script>

  </body>
</html>